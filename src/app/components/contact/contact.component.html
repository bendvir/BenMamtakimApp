<app-menu></app-menu>
<div *ngIf="errorPage">
  <app-error-page></app-error-page>
</div>
<div class="container" *ngIf="!success && !errorPage">
  <h2> אנחנו פה בשבילכם!</h2>
  <div>"ממתקי התקוה" רואה חשיבות עליונה במתן שירות אדיב ואכפתי, הלקוחות שלנו חשובים לנו ואנחנו עושים את כל המאמץ כדי לשרת אתכם בצורה הטובה והמהירה ביותר!
  </div>
  <h4 class="title">נשמח לשמוע מכם</h4>
  <div>
      <div class="alert alert-danger" *ngIf="errorMsg">
         עליכם למלא לפחות שם מלא וטלפון
      </div>
  <form>
    <div class="form-group">
      <!-- input for full name + validation -->
      <input
      required 
      name="fullName"
      [(ngModel)] ="fullName"
      #fullNameValid="ngModel" 
      minlength="3" 
      maxlength="30" 
      id="fullName" 
      type="text" 
      placeholder="שם מלא"
      class="form-control"
      pattern="(^[A-Za-z])|(\s)([A-Za-z])|([א-ת])|(\s)">
      <div class="alert alert-danger" *ngIf="fullNameValid.touched && !fullNameValid.valid">חובה להזין שם מלא
        <div *ngIf="fullNameValid.errors.minlength">נא להזין לפחות {{fullNameValid.errors.minlength.requiredLength}} תווים</div>
        <div *ngIf="fullNameValid.errors.pattern">אין להזין מספרים</div>
      </div>
    </div>
        <!-- input for phone Number + validation -->
    <div class="form-group">
    <input 
    required 
    name="phoneNumber" 
    [(ngModel)]="phoneNumber"
    #phoneNumberValid="ngModel" 
    type="text" 
    maxlength="10" 
    placeholder="טלפון"
    minlength="9"
    maxlength="10"
    pattern="[0-9]*"
    class="form-control"> 
    <div class="alert alert-danger" *ngIf ="phoneNumberValid.touched && !phoneNumberValid.valid">נא להזין מספר טלפון תקין
      <div *ngIf= "phoneNumberValid.errors.minlength">יש להזין לפחות {{phoneNumberValid.errors.minlength.requiredLength}} ספרות ללא תווים</div>
    </div>
  </div>
   <!-- input for email + validation -->
    <div class="form-group">
      <input 
      type="text"       
      [(ngModel)]="emailUser"
      #emailUserValid = "ngModel"      
      name="email"
      placeholder="name@example.com (לא חובה)"
      pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
      class="form-control"> 
         <div class="alert alert-danger" *ngIf ="emailUserValid.touched && !emailUserValid.valid">אימל חייב להיות בפורמט הנכון         
           <!-- <div *ngIf ="emailUserValid.errors?.required">נא להזין אימל </div> -->
        </div>    
     </div>
     <!-- message text box + validation -->
    <div class="form-group">
      <textarea  
      rows="5" 
      minlength="1" 
      maxlength="300" 
      [(ngModel)]="message"
      name="message"
      placeholder="כתוב לנו..."  
      class="form-control">
     </textarea>
    </div>
    <div>
      <re-captcha (resolved)="resolved($event)" siteKey="6LdudEgUAAAAAP4FSYlE8Dx5CmT1Wh9OXrWz-chK"></re-captcha>
    </div>
    <!-- Send button + active sendMail function -->
    <div>
      <button 
      type="button" 
      class="btn btn-primary" 
      (click)="sendMail()">
      שלח
      </button>
      <div *ngIf="gifWaiting">
        <img class="gif-icon" alt="" src="/assets/dafAbait/Wating.gif">
      </div>
    </div>
    
  </form>
    </div>
</div>

<div class="container" *ngIf="success">
  <div class="grid-container">
    <span class="grid-title">תודה לך!</span>
  </div>
  <div class="sucsess">
      <p>
          תודה לך, בקשתך ל"ממתקי התקוה" התקבלה ואנחנו נשמח להעניק לך שירות איכותי ואמין !
          נחזור אליך בהקדם האפשרי 🙂
      </p>
  </div>

</div>
